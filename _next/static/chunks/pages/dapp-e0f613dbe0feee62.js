(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[866],{74456:function(e,n,t){(window.__NEXT_P=window.__NEXT_P||[]).push(["/dapp",function(){return t(17909)}])},28962:function(e,n,t){"use strict";t.d(n,{O0:function(){return a},Vb:function(){return i},_8:function(){return r},zL:function(){return s}});let r="#05d9e8",i="#005678",s="#ff2a6d",a="#45848B"},17909:function(e,n,t){"use strict";t.r(n),t.d(n,{default:function(){return ed}});var r,i,s,a,o,l,d=t(85893),c=t(53130),u=t(13289),h=t(98256),m=t(67294),x=t(50053),j=t(34789),f=t(50555);function v(){var e,n;let t=j.mA(),r=j.KQ({address:t.address});x.Z,null===(e=t.address)||void 0===e||e.slice(0,9),null===(n=r.data)||void 0===n||n.formatted.slice(0,7);let i=(0,d.jsx)(f.tn,{});return i}function p(){return(0,d.jsx)(u.Z,{children:(0,d.jsx)(h.Z,{pullRight:!0,children:(0,d.jsx)(h.Z.Item,{children:(0,d.jsx)(v,{})})})})}var g=t(35014),b=t(4647),T=t(30327),Z=t(28962),C=t(35239),N=t(58724);(r=a||(a={}))[r.AwaitWalletConfirmation=0]="AwaitWalletConfirmation",r[r.WalletConfirmationDeclined=1]="WalletConfirmationDeclined",r[r.Broadcasting=2]="Broadcasting",r[r.EVMError=3]="EVMError",r[r.Success=4]="Success",r[r.Done=5]="Done";let E=e=>{let{type:n,header:t,content:r}=e;return(0,d.jsx)(N.Z,{type:n,header:t,closable:!0,children:r})},y=(0,d.jsx)(E,{type:"info",header:"Confirm broadcasting",content:"Please, confirm TX in your wallet."}),k=(0,d.jsx)(E,{type:"info",header:"Broadcasting TX",content:"TX is broadcasting..."}),w=(0,d.jsx)(E,{type:"success",header:"TX broadcasted!",content:"Done!"}),O=e=>{let{message:n,...t}=e;return(0,d.jsx)(E,{type:"error",header:"Contract will revert!",content:n.charAt(0).toUpperCase()+n.slice(1)})};function S(e,n){return null!=e&&(e.onSuccess=(e,t,r)=>{n.push(k,{placement:"topStart"})}),e}function A(e,n){return null!=e&&(e.onSuccess=e=>{n.push(w,{placement:"topStart"}),setTimeout(()=>{n.clear()},3e3)}),e}function R(e,n,t){return()=>{var r,i;if(n.refetch(),!n.isError)return t.push(y,{placement:"topStart"}),null==e?void 0:e();t.push((0,d.jsx)(O,{message:null!==(i=null===(r=n.error)||void 0===r?void 0:r.reason)&&void 0!==i?i:""}),{placement:"topStart"}),setTimeout(()=>{t.clear()},1e4)}}var F=t(3365);function D(){let e=j.mA(),n=j.do({...C.O0,functionName:"balanceOf",args:[e.address],watch:!0}),t=j.do({...C.O0,functionName:"souls",args:[e.address],watch:!0});if(void 0!==t.data&&void 0!==n.data)return n.data.gt(0)?{reputation:t.data[0],soulPrice:t.data[0]}:void 0}function P(e){let{spender:n}=e,t=j.mA(),r=j.do({...C.vF,functionName:"allowance",args:[t.address,n],watch:!0});return r.data}function B(){let e=j.mA(),n=j.do({...C.vF,functionName:"balanceOf",args:[e.address],watch:!0});return n.data}function W(e){var n;let{spender:t,amount:r}=e,i=(0,F.Z)(),s=j.PJ({...C.vF,functionName:"approve",args:[t,r]}),a=j.GG(S(s.config,i));return j.BX(A({hash:null===(n=a.data)||void 0===n?void 0:n.hash},i)),R(a.write,s,i)}var z=t(2593),I=t(35553);function G(e,n,t){var r;let i=I.formatUnits(null!==(r=null==e?void 0:e.toString())&&void 0!==r?r:"0",null!=t?t:18),s=i.indexOf(".");return(i=i.slice(0,s)+"."+i.slice(s+1,s+1+n)).endsWith(".0")&&(i=i.slice(0,i.length-2)),i}function L(){let e=D(),n=function(){let e=j.do({...C.O0,functionName:"soulPrice"});return e.data}(),t=B(),r=P({spender:C.O0.address}),i=W({spender:C.O0.address,amount:null!=n?n:z.O$.from(0)}),s=function(){var e;let n=(0,F.Z)(),t=j.PJ({...C.O0,functionName:"mintSoul"}),r=j.GG(S(t.config,n));return j.BX(A({hash:null===(e=r.data)||void 0===e?void 0:e.hash},n)),R(r.write,t,n)}(),a=function(){var e;let n=(0,F.Z)(),t=j.PJ({...C.O0,functionName:"burnSoul"}),r=j.GG(S(t.config,n));return j.BX(A({hash:null===(e=r.data)||void 0===e?void 0:e.hash},n)),R(r.write,t,n)}();return(0,d.jsxs)(g.Z,{style:{marginTop:10,marginLeft:20,marginRight:20},header:(0,d.jsx)("h3",{children:"Your soul"}),bordered:!0,shaded:!0,children:[e?(0,d.jsxs)("dl",{children:[(0,d.jsx)("dt",{children:"Reputation"}),(0,d.jsxs)("dd",{children:[G(e.reputation,18,void 0)," RTW "]}),(0,d.jsx)("dt",{children:"Soul Price"}),(0,d.jsxs)("dd",{children:[G(e.soulPrice,18,void 0)," RTW"]})]}):(0,d.jsxs)(d.Fragment,{children:[(0,d.jsx)("p",{children:"Nothing found. Mint tour soul before you start the job"}),(0,d.jsx)("br",{})]}),e?(0,d.jsx)(x.Z,{appearance:"ghost",style:{borderColor:Z.zL,color:Z.zL},block:!0,onClick:async()=>null==a?void 0:a(),children:"Burn your soul"}):(0,d.jsxs)(d.Fragment,{children:[(0,d.jsxs)(b.Z,{justified:!0,children:[(0,d.jsx)(x.Z,{appearance:"ghost",style:{borderColor:Z.zL,color:Z.zL},onClick:async()=>null==i?void 0:i(),disabled:null==r?void 0:r.gte(null!=n?n:z.O$.from(0)),children:"Approve RTW"}),(0,d.jsx)(x.Z,{disabled:null==r?void 0:r.lt(null!=n?n:z.O$.from(0)),appearance:"primary",style:{backgroundColor:Z.zL},onClick:async()=>null==s?void 0:s(),children:(0,d.jsx)("b",{children:"Mint new soul"})})]}),(0,d.jsx)("br",{}),(0,d.jsxs)(T.Z.HelpText,{children:["Soul price: ",G(r,5,void 0)," RTW"]}),(0,d.jsxs)(T.Z.HelpText,{children:["Balance: ",G(t,5,void 0)," RTW"]}),(0,d.jsxs)(T.Z.HelpText,{children:["Allowance: ",G(r,5,void 0)," RTW"]})]})]})}var V=t(4934),M=t(51939);function X(e){var n;let{mission:t}=e,r=j.do({...C.z,address:t,functionName:"numberOfCouriers",watch:!0}),i=j.xD({cacheKey:"couriers".concat(t),...j.Ui(e=>[{...C.z,address:t,functionName:"couriers",args:[z.O$.from(e)]}],{start:0,perPage:r.data,direction:"increment"})});return(0,m.useEffect)(()=>{i.refetch()},[r.data]),null===(n=i.data)||void 0===n?void 0:n.pages[0]}function _(e){let{token:n}=e,t=j.do({...C.d7,address:n,functionName:"symbol",watch:!0});return t.data}(i=o||(o={}))[i.NONE=0]="NONE",i[i.CREATED=1]="CREATED",i[i.INITIALIZED=2]="INITIALIZED",i[i.STARTED=3]="STARTED",i[i.ENDED=4]="ENDED",(s=l||(l={}))[s.COURIER=0]="COURIER",s[s.ARBITER=1]="ARBITER",s[s.UNKNOWN=2]="UNKNOWN";var J=t(98245),U=t(87523),H=t(3718),$=t(91099);function K(e){let{title:n,value:t,setValue:r,decimals:i,decimalsShift:s,children:a}=e;return(0,d.jsxs)(T.Z.Group,{controlId:"_",children:[(0,d.jsx)(T.Z.ControlLabel,{children:n}),(0,d.jsxs)(H.Z,{style:{marginTop:5,marginBottom:5},children:[(0,d.jsx)(H.Z.Button,{onClick:()=>r(t.sub(z.O$.from(10).pow(i+s))),children:"-"}),(0,d.jsx)($.Z,{className:"no-arrows-input-number",step:.1,value:G(t,18,i),onChange:e=>r(I.parseUnits(isNaN(parseInt(e))?"0":e,i))}),(0,d.jsx)(H.Z.Button,{onClick:()=>r(t.add(z.O$.from(10).pow(i+s))),children:"+"})]}),a]})}function Y(e){let{title:n,value:t,setValue:r,decimalsShift:i,children:s}=e;return(0,d.jsxs)(T.Z.Group,{controlId:"_",children:[(0,d.jsx)(T.Z.ControlLabel,{children:n}),(0,d.jsxs)(H.Z,{style:{marginTop:5,marginBottom:5},children:[(0,d.jsx)(H.Z.Button,{onClick:()=>r(t-10**i),children:"-"}),(0,d.jsx)($.Z,{className:"no-arrows-input-number",step:.1,value:t,onChange:e=>r(parseFloat(e))}),(0,d.jsx)(H.Z.Button,{onClick:()=>r(t+10**i),children:"+"})]}),s]})}function q(e){let{open:n,setOpen:t}=e,[r,i]=m.useState(""),[s,a]=m.useState(z.O$.from(0)),[o,l]=m.useState(z.O$.from(0)),[c,u]=m.useState(z.O$.from(0)),[h,f]=m.useState("0x0"),[v,p]=m.useState(0),[g,N]=m.useState(0),[E,y]=m.useState(0),[k,w]=m.useState(0),O=B(),D=P({spender:C.iW.address}),I=function(e){let{token:n}=e,t=j.do({...C.d7,address:n,functionName:"name",watch:!0});return t.data}({token:h}),L=_({token:h}),V=function(e){let{token:n}=e,t=j.mA(),r=j.do({...C.d7,address:n,functionName:"balanceOf",args:[t.address],watch:!0});return r.data}({token:h}),M=function(e){let{token:n,spender:t}=e,r=j.mA(),i=j.do({...C.d7,address:n,functionName:"allowance",args:[r.address,t],watch:!0});return i.data}({token:h,spender:C.iW.address}),X=W({spender:C.iW.address,amount:h===C.vF.address?s.add(o):s}),H=function(e){var n;let{token:t,spender:r,amount:i}=e,s=(0,F.Z)(),a=j.PJ({...C.d7,address:t,functionName:"approve",args:[r,i]}),o=j.GG(S(a.config,s));return j.BX(A({hash:null===(n=o.data)||void 0===n?void 0:n.hash},s)),R(o.write,a,s)}({token:h,spender:C.iW.address,amount:o}),$=function(e){var n;let{codex:t,totalRewardAmount:r,totalOperationAmount:i,minTotalCollateralPledge:s,operationToken:a,numeberOfCouriers:o,numberOfArbiters:l,executionTime:d,ratingTime:c}=e,u=(0,F.Z)(),h=j.PJ({...C.iW,functionName:"createMission",args:[t,r,i,s,a,o,l,d,c]}),m=j.GG(S(h.config,u));return j.BX(A({hash:null===(n=m.data)||void 0===n?void 0:n.hash},u)),R(m.write,h,u)}({codex:r,totalOperationAmount:o,totalRewardAmount:s,minTotalCollateralPledge:c,operationToken:h,numeberOfCouriers:v,numberOfArbiters:g,executionTime:60*E,ratingTime:60*k});return(0,d.jsxs)(J.Z,{size:"full",placement:"bottom",open:n,onClose:()=>t(!1),children:[(0,d.jsx)(J.Z.Header,{children:(0,d.jsx)(J.Z.Title,{children:(0,d.jsx)("h3",{children:"Create new mission"})})}),(0,d.jsxs)(J.Z.Body,{style:{maxWidth:1e3,margin:"0 auto"},children:[(0,d.jsx)(T.Z.ControlLabel,{children:"Provide mission description"}),(0,d.jsx)(U.Z,{as:"textarea",value:r,onChange:i}),(0,d.jsx)("br",{}),(0,d.jsxs)(K,{title:"Enter RTW reward amount",value:s,setValue:a,decimals:18,decimalsShift:2,children:[(0,d.jsxs)(T.Z.HelpText,{children:["Balance: ",G(O,5,18)]}),(0,d.jsxs)(T.Z.HelpText,{children:["Allowance: ",G(D,5,18)]})]}),(0,d.jsx)("br",{}),(0,d.jsx)(K,{title:"Enter RTW minimum collateral pledge amount",value:c,setValue:u,decimals:18,decimalsShift:2}),(0,d.jsx)("hr",{}),(0,d.jsx)(T.Z.ControlLabel,{children:"Provide operation token address (ERC20)"}),(0,d.jsx)(U.Z,{value:h,onChange:f}),(0,d.jsxs)(T.Z.HelpText,{children:["Token: ",I," (",L,")"]}),(0,d.jsx)("br",{}),(0,d.jsxs)(K,{title:"Enter token operation amount",value:o,setValue:l,decimals:18,decimalsShift:2,children:[(0,d.jsxs)(T.Z.HelpText,{children:["Balance: ",G(V,5,18)]}),(0,d.jsxs)(T.Z.HelpText,{children:["Allowance:  ",G(M,5,18)]})]}),(0,d.jsx)("hr",{}),(0,d.jsx)(Y,{title:"Enter count of couriers",value:v,setValue:p,decimalsShift:1}),(0,d.jsx)("br",{}),(0,d.jsx)(Y,{title:"Enter count of Arbiters",value:g,setValue:N,decimalsShift:1}),(0,d.jsx)("hr",{}),(0,d.jsx)(Y,{title:"Enter execution time duration (in mins)",value:E,setValue:y,decimalsShift:0}),(0,d.jsx)("br",{}),(0,d.jsx)(Y,{title:"Enter voting time duration (in mins)",value:k,setValue:w,decimalsShift:0}),(0,d.jsx)("hr",{}),(0,d.jsxs)(b.Z,{justified:!0,children:[(0,d.jsx)(x.Z,{appearance:"ghost",style:{borderColor:Z._8,color:Z._8},disabled:null==D?void 0:D.gte(s),onClick:async()=>null==X?void 0:X(),children:"Approve RTW"}),h===C.vF.address?(0,d.jsx)(d.Fragment,{}):(0,d.jsxs)(x.Z,{appearance:"ghost",style:{borderColor:Z._8,color:Z._8},disabled:null==M?void 0:M.gte(o),onClick:async()=>null==H?void 0:H(),children:["Approve ",L]})]}),(0,d.jsx)("br",{}),(0,d.jsx)(x.Z,{block:!0,appearance:"primary",disabled:!(null==D?void 0:D.gte(s))||!(null==M?void 0:M.gte(o)),style:{backgroundColor:Z.O0},onClick:async()=>null==$?void 0:$(),children:(0,d.jsx)("b",{children:"Create new mission"})})]})]})}function Q(e){let{open:n,setOpen:t,missionAddress:r}=e,i=B(),[s,a]=m.useState(z.O$.from(0)),[o,l]=m.useState(z.O$.from(0)),c=D(),u=function(e){var n;let{mission:t,pledgeAmount:r,pledgeReputation:i}=e,s=(0,F.Z)(),a=j.PJ({...C.z,address:t,functionName:"joinMission",args:[r,i]}),o=j.GG(S(a.config,s));return j.BX(A({hash:null===(n=o.data)||void 0===n?void 0:n.hash},s)),R(o.write,a,s)}({mission:r,pledgeAmount:s,pledgeReputation:o});return(0,d.jsxs)(J.Z,{size:"full",placement:"bottom",open:n,onClose:()=>t(!1),children:[(0,d.jsx)(J.Z.Header,{children:(0,d.jsx)(J.Z.Title,{children:(0,d.jsx)("h3",{children:"Join the mission"})})}),(0,d.jsxs)(J.Z.Body,{style:{maxWidth:1e3,margin:"0 auto"},children:[(0,d.jsx)(K,{title:"Enter pledge amount",value:s,setValue:a,decimals:18,decimalsShift:2}),(0,d.jsxs)(T.Z.HelpText,{children:["Balance: ",G(i,5,18)]}),(0,d.jsx)("br",{}),(0,d.jsx)(K,{title:"Enter pledge reputation",value:o,setValue:l,decimals:18,decimalsShift:2}),(0,d.jsxs)(T.Z.HelpText,{children:["Your reputation: ",G(null==c?void 0:c.reputation,5,18)]}),(0,d.jsx)("br",{}),(0,d.jsx)(x.Z,{block:!0,appearance:"primary",style:{backgroundColor:Z.O0},onClick:async()=>null==u?void 0:u(),children:(0,d.jsx)("b",{children:"Join the mission"})})]})]})}var ee=t(76461),en=t(30441);function et(e){let{secondsFrom:n,onExpired:t,...r}=e,[i,s]=m.useState(n),[a,o]=m.useState(!1);return 0!==i?setTimeout(()=>{s(i-1)},1e3):a||(null==t||t(),o(!0)),(0,d.jsxs)(d.Fragment,{children:[Math.floor(i/60)," mins"]})}function er(e){let{mission:n,runner:t,votings:r,index:i}=e,s=function(e){let{mission:n,runner:t}=e,r=j.do({...C.z,address:n,functionName:"proofs",args:[t],watch:!0});return r.data}({mission:n,runner:t}),[a,o]=m.useState(!1),[l,c]=m.useState();return(0,d.jsx)(g.Z,{header:t,bordered:!0,shaded:!0,expanded:!0,children:(0,d.jsxs)("dl",{children:[(0,d.jsx)("dt",{children:"Proof"}),(0,d.jsx)("dd",{children:s}),(0,d.jsx)("dt",{children:"Decision"}),(0,d.jsx)("dd",{children:(0,d.jsxs)(ee.Z,{value:l,onChange(e){let n=r.findIndex(e=>e[0]===i);-1===n?r.push([i,"PASSED"===e]):r[n]=[i,"PASSED"===e],c(e)},inline:!0,children:[(0,d.jsx)(en.Z,{value:"PASSED",onChange(){},children:"Passed"}),(0,d.jsx)(en.Z,{value:"FAILED",onChange(){},children:"Failed"})]})})]})})}function ei(e){let{open:n,setOpen:t,mission:r,startTime:i,executionDuration:s,rateDuration:a}=e,o=Math.round(Date.now()/1e3),[l,c]=m.useState([]),u=X({mission:r}),h=function(e){var n;let{mission:t,rates:r}=e,i=(0,F.Z)(),s=j.PJ({...C.z,address:t,functionName:"rateCouriers",args:[r]}),a=j.GG(S(s.config,i));return j.BX(A({hash:null===(n=a.data)||void 0===n?void 0:n.hash},i)),R(a.write,s,i)}({mission:r,rates:l.sort((e,n)=>e[0]-n[0]).map(e=>e[1])}),[f,v]=m.useState(o>i&&o<i+s||i+s+a<o);return(0,d.jsxs)(J.Z,{size:"full",placement:"bottom",open:n,onClose:()=>t(!1),children:[(0,d.jsx)(J.Z.Header,{children:(0,d.jsx)(J.Z.Title,{children:(0,d.jsx)("h3",{children:"Vote for runners"})})}),(0,d.jsxs)(J.Z.Body,{style:{maxWidth:1e3,margin:"0 auto"},children:[null==u?void 0:u.map((e,n)=>(0,d.jsx)(er,{index:n,mission:r,runner:e,votings:l})),(0,d.jsx)("br",{}),(0,d.jsx)(x.Z,{appearance:"primary",style:{backgroundColor:Z.zL},block:!0,disabled:l.length!==(null==u?void 0:u.length)||o>i&&o<i+s||i+s+a<o,onClick:async()=>h(),children:(0,d.jsxs)("b",{children:["Vote for runners ",o>i&&o<i+s?(0,d.jsxs)(d.Fragment,{children:["(unlocks in ",(0,d.jsx)(et,{secondsFrom:i+s-o,onExpired:()=>v(!1)}),")"]}):i+s+a>o?(0,d.jsxs)(d.Fragment,{children:["(ends in ",(0,d.jsx)(et,{secondsFrom:i+s+a-o,onExpired:()=>v(!0)}),")"]}):(0,d.jsx)(d.Fragment,{children:"ended"})]})})]})]})}function es(e){let{open:n,setOpen:t,mission:r,endTime:i}=e,[s,a]=m.useState([]),o=function(e){var n;let{mission:t,proof:r}=e,i=(0,F.Z)(),s=j.PJ({...C.z,address:t,functionName:"pushProof",args:[r]}),a=j.GG(S(s.config,i));return j.BX(A({hash:null===(n=a.data)||void 0===n?void 0:n.hash},i)),R(a.write,s,i)}({mission:r,proof:s}),[l,c]=m.useState(i<Date.now());return(0,d.jsxs)(J.Z,{size:"full",placement:"bottom",open:n,onClose:()=>t(!1),children:[(0,d.jsx)(J.Z.Header,{children:(0,d.jsx)(J.Z.Title,{children:(0,d.jsx)("h3",{children:"Push proof"})})}),(0,d.jsxs)(J.Z.Body,{style:{maxWidth:1e3,margin:"0 auto"},children:[(0,d.jsx)(T.Z.ControlLabel,{children:"Provide proofs you've done the mission"}),(0,d.jsx)(U.Z,{as:"textarea",value:s,onChange:a}),(0,d.jsx)("br",{}),(0,d.jsx)(x.Z,{appearance:"primary",style:{backgroundColor:Z.zL},disabled:l,block:!0,onClick:async()=>o(),children:(0,d.jsxs)("b",{children:["Push proof ",i>=Math.round(Date.now()/1e3)?(0,d.jsxs)(d.Fragment,{children:["(ends in ",(0,d.jsx)(et,{secondsFrom:i-Math.round(Date.now()/1e3),onExpired:()=>c(!0)}),")"]}):(0,d.jsx)(d.Fragment,{})]})})]})]})}function ea(){let[e,n]=m.useState(!1);return(0,d.jsxs)("div",{style:{marginLeft:20,marginRight:20},children:[(0,d.jsx)("h3",{children:"Missions"}),(0,d.jsx)("br",{}),(0,d.jsx)(x.Z,{block:!0,appearance:"ghost",style:{borderColor:Z.Vb,borderWidth:2},onClick:()=>n(!0),children:(0,d.jsx)("b",{children:"Create new"})}),(0,d.jsx)(q,{open:e,setOpen:n})]})}function eo(e){var n,t;let{missionAddress:r}=e,i=Math.round(Date.now()/1e3),s=j.mA(),a=function(e){var n,t;let r={address:e,...C.z},i=j.xD({cacheKey:e,contracts:()=>[{...C.iW,functionName:"missionIds",args:[e]},{...r,functionName:"codex"},{...r,functionName:"runnerRewardAmount"},{...r,functionName:"totalOperationAmount"},{...r,functionName:"minRunnerCollateral"},{...r,functionName:"operationToken"},{...r,functionName:"numberOfCouriers"},{...r,functionName:"numberOfArbiters"},{...r,functionName:"executionTime"},{...r,functionName:"ratingTime"},{...r,functionName:"creator"},{...r,functionName:"status",watch:!0},{...r,functionName:"startTime"}]});if((null===(n=i.data)||void 0===n?void 0:n.pages[0])!==void 0)return{id:i.data.pages[0][0],codex:i.data.pages[0][1],totalRewardAmount:i.data.pages[0][2],totalOperationAmount:i.data.pages[0][3],minTotalCollateralPledge:i.data.pages[0][4],operationToken:i.data.pages[0][5],numberOfCouriers:i.data.pages[0][6],numberOfArbiters:i.data.pages[0][7],executionTime:i.data.pages[0][8],ratingTime:i.data.pages[0][9],creator:i.data.pages[0][10],status:i.data.pages[0][11],startTime:null===(t=i.data.pages[0][12])||void 0===t?void 0:t.toNumber()}}(r),c=_({token:null!==(n=null==a?void 0:a.operationToken)&&void 0!==n?n:"0x0"}),u=function(e){let{token:n}=e,t=j.do({...C.d7,address:n,functionName:"decimals",watch:!0});return t.data}({token:null!==(t=null==a?void 0:a.operationToken)&&void 0!==t?t:"0x0"}),h=function(e){var n;let{mission:t}=e,r=j.do({...C.z,address:t,functionName:"numberOfCouriers",watch:!0}),i=j.do({...C.z,address:t,functionName:"numberOfArbiters",watch:!0}),s=j.xD({cacheKey:"runenrs".concat(t),...j.Ui(e=>[{...C.z,address:t,functionName:"runners",args:[z.O$.from(e)]}],{start:0,perPage:r.data+i.data,direction:"increment"})});return(0,m.useEffect)(()=>{s.refetch()},[r.data,i.data]),(null===(n=s.data)||void 0===n?void 0:n.pages[0].filter(e=>e).length)/(r.data+i.data)*100}({mission:r}),f=function(e){var n;let{mission:t}=e,r=j.mA(),i=j.do({...C.z,address:t,functionName:"positions",args:[r.address],watch:!0});return!(null===(n=i.data)||void 0===n?void 0:n[0].eq(0))}({mission:r}),[v,p]=m.useState(!1),b=function(e){var n;let{mission:t}=e,r=(0,F.Z)(),i=j.PJ({...C.z,address:t,functionName:"leaveMission"}),s=j.GG(S(i.config,r));return j.BX(A({hash:null===(n=s.data)||void 0===n?void 0:n.hash},r)),R(s.write,i,r)}({mission:r}),T=function(e){var n;let{mission:t}=e,r=(0,F.Z)(),i=j.PJ({...C.z,address:t,functionName:"initMission"}),s=j.GG(S(i.config,r));return j.BX(A({hash:null===(n=s.data)||void 0===n?void 0:n.hash},r)),R(s.write,i,r)}({mission:r}),N=function(e){var n;let{mission:t}=e,r=(0,F.Z)(),i=j.PJ({...C.z,address:t,functionName:"startMission"}),s=j.GG(S(i.config,r));return j.BX(A({hash:null===(n=s.data)||void 0===n?void 0:n.hash},r)),R(s.write,i,r)}({mission:r}),E=function(e){var n;let{mission:t}=e,r=(0,F.Z)(),i=j.PJ({...C.z,address:t,functionName:"endMission"}),s=j.GG(S(i.config,r));return j.BX(A({hash:null===(n=s.data)||void 0===n?void 0:n.hash},r)),R(s.write,i,r)}({mission:r}),y=function(e){var n;let{mission:t}=e,r=(0,F.Z)(),i=j.PJ({...C.z,address:t,functionName:"withdrawCollateral"}),s=j.GG(S(i.config,r));return j.BX(A({hash:null===(n=s.data)||void 0===n?void 0:n.hash},r)),R(s.write,i,r)}({mission:r}),k=function(e){let{mission:n}=e,t=j.mA(),r=X({mission:n}),i=function(e){var n;let{mission:t}=e,r=j.do({...C.z,address:t,functionName:"numberOfArbiters",watch:!0}),i=j.xD({cacheKey:"arbiters".concat(t),...j.Ui(e=>[{...C.z,address:t,functionName:"arbiters",args:[z.O$.from(e)]}],{start:0,perPage:r.data,direction:"increment"})});return(0,m.useEffect)(()=>{i.refetch()},[r.data]),null===(n=i.data)||void 0===n?void 0:n.pages[0]}({mission:n});return(null==r?void 0:r.includes(t.address))?l.COURIER:(null==i?void 0:i.includes(t.address))?l.ARBITER:l.UNKNOWN}({mission:r}),w="UNKNOWN";k===l.COURIER?w="COURIER":k===l.ARBITER&&(w="ARBITER");let[O,D]=m.useState(!1),[P,B]=m.useState(!1),[W,I]=m.useState(i>(null==a?void 0:a.startTime)&&i<(null==a?void 0:a.startTime)+(null==a?void 0:a.executionTime)||i>(null==a?void 0:a.startTime)+(null==a?void 0:a.executionTime)+(null==a?void 0:a.ratingTime));return(0,d.jsxs)(g.Z,{header:(0,d.jsxs)("span",{children:["Mission ",(0,d.jsxs)("span",{style:{color:"grey"},children:["(#",null==a?void 0:a.id.toNumber(),", ",null==r?void 0:r.slice(0,15),")"]})]}),bordered:!0,shaded:!0,defaultExpanded:!1,collapsible:!0,children:[(0,d.jsxs)("dl",{children:[(0,d.jsx)("dt",{children:"Codex"}),(0,d.jsx)("dd",{children:null==a?void 0:a.codex}),(0,d.jsx)("dt",{children:"Creator"}),(0,d.jsx)("dd",{children:null==a?void 0:a.creator}),(0,d.jsx)("dt",{children:"Execution duration"}),(0,d.jsxs)("dd",{children:[(null==a?void 0:a.executionTime)/60," min"]}),(0,d.jsx)("dt",{children:"Voting time"}),(0,d.jsxs)("dd",{children:[(null==a?void 0:a.ratingTime)/60," min"]}),(0,d.jsx)("dt",{children:"Roles"}),(0,d.jsxs)("dd",{children:[null==a?void 0:a.numberOfCouriers," couriers / ",null==a?void 0:a.numberOfArbiters," arbiters "]}),(0,d.jsx)("dt",{children:"OP token"}),(0,d.jsxs)("dd",{children:[G(null==a?void 0:a.totalOperationAmount,18,null!=u?u:1)," ",c," (",null==a?void 0:a.operationToken,")"]}),(0,d.jsx)("dt",{children:"Min collateral per runner"}),(0,d.jsxs)("dd",{children:[G(null==a?void 0:a.minTotalCollateralPledge,5,18)," RTW"]}),(0,d.jsx)("dt",{children:"Joined"}),(0,d.jsx)("dd",{children:(0,d.jsx)(V.Z.Line,{percent:h,strokeColor:"#DDFF2A"})}),(0,d.jsx)("hr",{}),(0,d.jsx)("dt",{children:"Role"}),(0,d.jsx)("dd",{children:w}),(0,d.jsx)("dt",{children:"Reward"}),(0,d.jsxs)("dd",{children:[G(null==a?void 0:a.totalRewardAmount,5,18)," RTW"]})]}),(null==a?void 0:a.creator)===s.address?(0,d.jsxs)(d.Fragment,{children:[(0,d.jsx)("br",{}),(null==a?void 0:a.creator)===s.address&&(null==a?void 0:a.status)===o.CREATED?(0,d.jsx)(x.Z,{appearance:"ghost",block:!0,style:{borderColor:Z.Vb},onClick:async()=>T(),children:(0,d.jsx)("b",{children:"Init mission"})}):(0,d.jsx)(d.Fragment,{}),(null==a?void 0:a.creator)===s.address&&(null==a?void 0:a.status)===o.INITIALIZED?(0,d.jsx)(x.Z,{appearance:"ghost",block:!0,style:{borderColor:Z.Vb},onClick:async()=>N(),children:(0,d.jsx)("b",{children:"Start mission"})}):(0,d.jsx)(d.Fragment,{}),(null==a?void 0:a.creator)===s.address&&(null==a?void 0:a.status)===o.STARTED?(0,d.jsx)(x.Z,{appearance:"ghost",block:!0,style:{borderColor:Z.zL,color:Z.zL},onClick:async()=>E(),children:(0,d.jsx)("b",{children:"End mission"})}):(0,d.jsx)(d.Fragment,{})]}):(0,d.jsx)(d.Fragment,{}),(null==a?void 0:a.status)===o.CREATED?f?(0,d.jsxs)(d.Fragment,{children:[(0,d.jsx)("br",{}),(0,d.jsx)(x.Z,{appearance:"primary",style:{backgroundColor:Z.O0},block:!0,onClick:async()=>b(),children:(0,d.jsx)("b",{children:"Leave"})})]}):(0,d.jsxs)(d.Fragment,{children:[(0,d.jsx)("br",{}),(0,d.jsx)(x.Z,{appearance:"primary",style:{backgroundColor:Z.Vb},block:!0,onClick:()=>p(!0),children:(0,d.jsx)("b",{children:"Join"})})]}):(0,d.jsx)(d.Fragment,{}),(null==a?void 0:a.status)===o.ENDED&&f?(0,d.jsxs)(d.Fragment,{children:[(0,d.jsx)("br",{}),(0,d.jsx)(x.Z,{appearance:"primary",style:{backgroundColor:Z.O0},block:!0,onClick:()=>y(),children:(0,d.jsx)("b",{children:"Withdraw collateral"})})]}):(0,d.jsx)(d.Fragment,{}),k===l.ARBITER&&(null==a?void 0:a.status)==o.STARTED?(0,d.jsxs)(d.Fragment,{children:[(0,d.jsx)("br",{}),(0,d.jsx)(x.Z,{appearance:"primary",style:{backgroundColor:Z.zL},block:!0,disabled:W||(null==a?void 0:a.startTime)+(null==a?void 0:a.executionTime)+(null==a?void 0:a.ratingTime)<i,onClick(){D(!0)},children:(0,d.jsxs)("b",{children:["Vote for runners ",i>(null==a?void 0:a.startTime)&&i<(null==a?void 0:a.startTime)+(null==a?void 0:a.executionTime)?(0,d.jsxs)(d.Fragment,{children:["(unlocks in ",(0,d.jsx)(et,{secondsFrom:(null==a?void 0:a.startTime)+(null==a?void 0:a.executionTime)-i,onExpired:()=>I(!1)}),")"]}):(null==a?void 0:a.startTime)+(null==a?void 0:a.executionTime)+(null==a?void 0:a.ratingTime)>i?(0,d.jsxs)(d.Fragment,{children:["(ends in ",(0,d.jsx)(et,{secondsFrom:(null==a?void 0:a.startTime)+(null==a?void 0:a.executionTime)+(null==a?void 0:a.ratingTime)-i,onExpired:()=>I(!0)}),")"]}):(0,d.jsx)(d.Fragment,{children:"ended"})]})})]}):(0,d.jsx)(d.Fragment,{}),k===l.COURIER&&(null==a?void 0:a.status)==o.STARTED?(0,d.jsxs)(d.Fragment,{children:[(0,d.jsx)("br",{}),(0,d.jsx)(x.Z,{appearance:"primary",style:{backgroundColor:Z.zL},block:!0,onClick(){B(!0)},children:(0,d.jsxs)("b",{children:["Push proof (ends in ",(0,d.jsx)(et,{secondsFrom:a.startTime+a.executionTime-i}),")"]})})]}):(0,d.jsx)(d.Fragment,{}),(0,d.jsx)(es,{open:P,setOpen:B,mission:r,endTime:(null==a?void 0:a.startTime)+(null==a?void 0:a.executionTime)}),(0,d.jsx)(ei,{open:O,setOpen:D,mission:r,startTime:null==a?void 0:a.startTime,executionDuration:null==a?void 0:a.executionTime,rateDuration:null==a?void 0:a.ratingTime}),(0,d.jsx)(Q,{open:v,setOpen:p,missionAddress:r})]})}function el(){let e=function(){var e,n;let t=j.do({...C.iW,functionName:"totalMissions",watch:!0}),r=j.xD({cacheKey:"missions",...j.Ui(e=>[{...C.iW,functionName:"missionList",args:[z.O$.from(e)]}],{start:0,perPage:null===(e=t.data)||void 0===e?void 0:e.toNumber(),direction:"increment"})});return(0,m.useEffect)(()=>{r.refetch()},[t.data]),null===(n=r.data)||void 0===n?void 0:n.pages[0]}();return(0,d.jsxs)(M.Z,{accordion:!0,children:[(0,d.jsx)(ea,{}),(0,d.jsxs)(g.Z,{defaultExpanded:!0,header:"Available",children:[null==e?void 0:e.map(e=>(0,d.jsxs)(d.Fragment,{children:[(0,d.jsx)(eo,{missionAddress:e}),(0,d.jsx)("br",{})]})),(0,d.jsx)("br",{})]})]})}function ed(){return(0,d.jsxs)(d.Fragment,{children:[(0,d.jsx)(p,{}),(0,d.jsxs)("div",{style:{padding:10,maxWidth:1150,margin:"0 auto"},children:[(0,d.jsx)(L,{}),(0,d.jsx)(c.Z,{}),(0,d.jsx)(el,{})]})]})}}},function(e){e.O(0,[380,294,774,888,179],function(){return e(e.s=74456)}),_N_E=e.O()}]);